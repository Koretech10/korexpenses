{% extends 'base.html.twig' %}

{% block title %}Opérations{% endblock %}

{% block actions %}
    <div class="btn-group" role="group" data-toggle="tooltip" data-placement="bottom" title="Créer opération">
        <button type="button" class="btn btn-success" data-toggle="modal" data-target="#createModal">
            <i class="bi bi-plus"></i>
        </button>
    </div>
{% endblock %}

{% block body %}
    <div class="col-12 table-responsive">
        <table class="table table-striped table-hover">
            <thead class="thead-light">
                <tr>
                    <th>Date</th>
                    <th>Libellé</th>
                    <th>Débit</th>
                    <th>Crédit</th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody>
            {% for transaction in transactions %}
            {# @var \App\Entity\Transaction transaction #}
                <tr>
                    <td>{{ transaction.date | date('d/m/Y') }}</td>
                    <td>
                        <a href="{{ path('transaction_edit', {'id': transaction.id}) }}">
                            {{ transaction.description }}
                        </a>
                    </td>
                    <td class="text-danger">
                        {% if transaction.type == 0 %}
                            {{ transaction.value }} €
                        {% endif %}
                    </td>
                    <td class="text-success">
                        {% if transaction.type == 1 %}
                            {{ transaction.value }} €
                        {% endif %}
                    </td>
                    <td>&nbsp;</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% embed 'modals/generic.html.twig' %}
        {% block modalId %}createModal{% endblock %}
        {% block modalHeader %}
            <h4 class="modal-title">Créer une nouvelle opération</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
        {% endblock %}
        {% block modalBody %}
            {{ form(newTransactionForm) }}
        {% endblock %}
        {% block modalFooter %}
            <button type="button" class="btn btn-light" data-dismiss="modal">
                <i class="bi bi-arrow-left"></i> Retour
            </button>
        {% endblock %}
    {% endembed %}
{% endblock %}
